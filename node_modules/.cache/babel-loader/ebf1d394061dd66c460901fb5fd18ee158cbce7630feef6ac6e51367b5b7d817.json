{"ast":null,"code":"import _defineProperty from\"C:/Users/gayuc/OneDrive/Desktop/Can/can-do/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/gayuc/OneDrive/Desktop/Can/can-do/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/gayuc/OneDrive/Desktop/Can/can-do/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./LoginPage.css';import{useState}from'react';import{LoginApi}from'../services/Api';import{storeUserData}from'../services/Storage';import{isAuthenticated}from'../services/Auth';import{Link,Navigate}from'react-router-dom';import Nav from'../components/NavbarFire';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(){var initialStateErrors={email:{required:false},password:{required:false},custom_error:null};var _useState=useState(initialStateErrors),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState({email:\"\",password:\"\"}),_useState6=_slicedToArray(_useState5,2),inputs=_useState6[0],setInputs=_useState6[1];var handleInput=function handleInput(event){setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},event.target.name,event.target.value)));};var handleSubmit=function handleSubmit(event){// console.log(inputs);\nevent.preventDefault();var errors=initialStateErrors;var hasError=false;if(inputs.email==\"\"){errors.email.required=true;hasError=true;}if(inputs.password==\"\"){errors.password.required=true;hasError=true;}if(!hasError){setLoading(true);//sending login api request\nLoginApi(inputs).then(function(response){storeUserData(response.data.idToken);}).catch(function(err){if(err.code==\"ERR_BAD_REQUEST\"){setErrors(_objectSpread(_objectSpread({},errors),{},{custom_error:\"Invalid Credentials!\"}));}}).finally(function(){setLoading(false);});}setErrors(_objectSpread({},errors));};if(isAuthenticated()){//redirect user to dashboard page\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/home\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"section\",{className:\"login-block  fullbgfire1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container \",id:\"bgregfire1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col login-sec\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Login Now\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"login-form\",action:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"text-uppercase fw-bold\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",onChange:handleInput,name:\"email\",id:\"\",placeholder:\"Email\"}),errors.email.required?/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Email is required.\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"text-uppercase fw-bold\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"password\",onChange:handleInput,name:\"password\",placeholder:\"Password\",id:\"\"}),errors.password.required?/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Password is required.\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary \",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})})}):null,/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:errors.custom_error?/*#__PURE__*/_jsx(\"p\",{children:errors.custom_error}):null}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-login float-right\",id:\"btnfire1\",disabled:loading,value:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[\"Create new account ? Please \",/*#__PURE__*/_jsx(Link,{className:\"linklogfire1 text-light\",to:\"/register\",children:\"Register\"})]})]})]})})})})]});}","map":{"version":3,"names":["useState","LoginApi","storeUserData","isAuthenticated","Link","Navigate","Nav","LoginPage","initialStateErrors","email","required","password","custom_error","errors","setErrors","loading","setLoading","inputs","setInputs","handleInput","event","target","name","value","handleSubmit","preventDefault","hasError","then","response","data","idToken","catch","err","code","finally"],"sources":["C:/Users/gayuc/OneDrive/Desktop/Can/can-do/src/pages/LoginPage.js"],"sourcesContent":["\r\nimport './LoginPage.css';\r\nimport { useState } from 'react';\r\nimport { LoginApi } from '../services/Api';\r\nimport { storeUserData } from '../services/Storage';\r\nimport { isAuthenticated } from '../services/Auth';\r\nimport { Link, Navigate } from 'react-router-dom';\r\nimport Nav from '../components/NavbarFire';\r\nexport default function LoginPage(){\r\n\r\n\r\n    const initialStateErrors = {\r\n        email:{required:false},\r\n        password:{required:false},\r\n        custom_error:null\r\n       };\r\n    const [errors,setErrors]=useState(initialStateErrors);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const [inputs,setInputs]= useState({\r\n        email:\"\",\r\n        password:\"\"\r\n     })\r\n\r\n    const handleInput=(event)=>{\r\n        setInputs({...inputs,[event.target.name]:event.target.value})\r\n    }\r\n\r\n    const handleSubmit=(event)=>{\r\n        // console.log(inputs);\r\n        event.preventDefault();\r\n        let errors = initialStateErrors;\r\n        let hasError=false;\r\n        if(inputs.email == \"\"){\r\n           errors.email.required=true;\r\n           hasError=true;\r\n        }\r\n        if(inputs.password == \"\"){\r\n           errors.password.required=true;\r\n           hasError=true;\r\n        }\r\n  \r\n        if(!hasError){\r\n           setLoading(true);\r\n           //sending login api request\r\n           LoginApi(inputs).then((response)=>{\r\n             storeUserData(response.data.idToken);\r\n           }).catch((err)=>{\r\n             if (err.code == \"ERR_BAD_REQUEST\" ) {\r\n                setErrors({...errors,custom_error:\"Invalid Credentials!\"})\r\n             }\r\n\r\n           }).finally(()=>{\r\n              setLoading(false)\r\n           })\r\n  \r\n        }\r\n        setErrors({...errors});\r\n  \r\n    } \r\n\r\n  \r\n\r\n    if(isAuthenticated()){\r\n        //redirect user to dashboard page\r\n        return <Navigate to=\"/home\"/>\r\n     }\r\n\r\n\r\n    return(\r\n        <div>\r\n           <Nav/>\r\n           <section className=\"login-block  fullbgfire1\">\r\n        <div className=\"container \" id=\"bgregfire1\">\r\n            <div className=\"row \">\r\n                <div className=\"col login-sec\">\r\n                    <h2 className=\"text-center\">Login Now</h2>\r\n                    <form onSubmit={handleSubmit} className=\"login-form\" action=\"\">\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"exampleInputEmail1\" className=\"text-uppercase fw-bold\">Email</label>\r\n                        <input type=\"email\"  className=\"form-control\" onChange={handleInput} name=\"email\"  id=\"\" placeholder=\"Email\"  />\r\n                    { errors.email.required?\r\n                   ( <span className=\"text-danger\" >\r\n                        Email is required.\r\n                    </span>):null\r\n                    }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"exampleInputPassword1\" className=\"text-uppercase fw-bold\">Password</label>\r\n                        <input  className=\"form-control\" type=\"password\" onChange={handleInput} name=\"password\" placeholder=\"Password\" id=\"\" />\r\n                    { errors.password.required?\r\n                    (<span className=\"text-danger\" >\r\n                        Password is required.\r\n                    </span>):null\r\n                    }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                    {loading?\r\n                   ( <div  className=\"text-center\">\r\n                      <div className=\"spinner-border text-primary \" role=\"status\">\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    </div>): null\r\n                    }\r\n                        <span className=\"text-danger\" >\r\n                        { errors.custom_error?\r\n                      (<p>{errors.custom_error}</p>)\r\n                      :null\r\n                     }\r\n                        </span>\r\n                        <input  type=\"submit\" className=\"btn btn-login float-right\" id=\"btnfire1\" disabled={loading} value=\"Login\"/>\r\n                    </div>\r\n                    <div className=\"clearfix\"></div>\r\n                    <div className=\"form-group\">\r\n                    Create new account ? Please <Link className=\"linklogfire1 text-light\" to=\"/register\">Register</Link>\r\n                    </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n           </section>\r\n        </div>\r\n       \r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}