{"ast":null,"code":"import _defineProperty from\"C:/Users/gayuc/OneDrive/Desktop/Can/can-do/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/gayuc/OneDrive/Desktop/Can/can-do/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/gayuc/OneDrive/Desktop/Can/can-do/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{RegisterApi}from'../services/Api';import{isAuthenticated}from'../services/Auth';import{storeUserData}from'../services/Storage';import'./RegisterPage.css';import{Link,Navigate}from'react-router-dom';import Nav from'../components/NavbarFire';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RegisterPage(){var initialStateErrors={email:{required:false},password:{required:false},name:{required:false},custom_error:null};var _useState=useState(initialStateErrors),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var errors=initialStateErrors;var hasError=false;if(inputs.name==\"\"){errors.name.required=true;hasError=true;}if(inputs.email==\"\"){errors.email.required=true;hasError=true;}if(inputs.password==\"\"){errors.password.required=true;hasError=true;}if(!hasError){setLoading(true);//sending register api request\nRegisterApi(inputs).then(function(response){storeUserData(response.data.idToken);}).catch(function(err){if(err.response.data.error.message==\"EMAIL_EXISTS\"){setErrors(_objectSpread(_objectSpread({},errors),{},{custom_error:\"Already this email has been registered!\"}));}else if(String(err.response.data.error.message).includes('WEAK_PASSWORD')){setErrors(_objectSpread(_objectSpread({},errors),{},{custom_error:\"Password should be at least 6 characters!\"}));}}).finally(function(){setLoading(false);});}console.log(initialStateErrors,errors);setErrors(errors);};var _useState5=useState({email:\"\",password:\"\",name:\"\"}),_useState6=_slicedToArray(_useState5,2),inputs=_useState6[0],setInputs=_useState6[1];var handleInput=function handleInput(event){setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},event.target.name,event.target.value)));};if(isAuthenticated()){return/*#__PURE__*/_jsx(Navigate,{to:\"/home\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"section\",{className:\"register-block fullbgfire\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",id:\"bgregfire\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col register-sec\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Register Now\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"register-form\",action:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"text-uppercase fw-bold\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",onChange:handleInput,name:\"name\",id:\"\"}),errors.name.required?/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Name is required.\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",className:\"text-uppercase fw-bold\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",onChange:handleInput,name:\"email\",id:\"\"}),errors.email.required?/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Email is required.\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputPassword1\",className:\"text-uppercase fw-bold\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"password\",onChange:handleInput,name:\"password\",id:\"\"}),errors.password.required?/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"Password is required.\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:errors.custom_error?/*#__PURE__*/_jsx(\"p\",{children:errors.custom_error}):null}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary \",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})})}):null,/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-login float-right\",id:\"btnfire\",disabled:loading,value:\"Register\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"clearfix\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[\"Already have account ? Please \",/*#__PURE__*/_jsx(Link,{className:\"linklogfire text-ligth\",to:\"/login\",children:\"Login\"})]})]})]})})})})]});}","map":{"version":3,"names":["useState","RegisterApi","isAuthenticated","storeUserData","Link","Navigate","Nav","RegisterPage","initialStateErrors","email","required","password","name","custom_error","errors","setErrors","loading","setLoading","handleSubmit","event","preventDefault","hasError","inputs","then","response","data","idToken","catch","err","error","message","String","includes","finally","console","log","setInputs","handleInput","target","value"],"sources":["C:/Users/gayuc/OneDrive/Desktop/Can/can-do/src/pages/RegisterPage.js"],"sourcesContent":["import { useState } from 'react'\r\nimport { RegisterApi } from '../services/Api';\r\nimport { isAuthenticated } from '../services/Auth';\r\nimport { storeUserData } from '../services/Storage';\r\nimport './RegisterPage.css'\r\nimport { Link, Navigate } from 'react-router-dom';\r\nimport Nav from '../components/NavbarFire';\r\n\r\nexport default function RegisterPage(){\r\n    const initialStateErrors = {\r\n        email:{required:false},\r\n        password:{required:false},\r\n        name:{required:false},\r\n        custom_error:null\r\n    };\r\n    const [errors,setErrors] = useState(initialStateErrors);\r\n\r\n    const [loading,setLoading]  =  useState(false);\r\n\r\n    const handleSubmit = (event)=>{\r\n        event.preventDefault();\r\n        let errors =initialStateErrors; \r\n        let hasError = false; \r\n        if (inputs.name == \"\") {\r\n            errors.name.required =true;\r\n            hasError=true;\r\n        }\r\n        if (inputs.email == \"\") {\r\n            errors.email.required =true;\r\n            hasError=true;\r\n        }\r\n        if (inputs.password == \"\") {\r\n            errors.password.required =true;\r\n            hasError=true;\r\n        }\r\n\r\n        if (!hasError) {\r\n            setLoading(true)\r\n            //sending register api request\r\n            RegisterApi(inputs).then((response)=>{\r\n               storeUserData(response.data.idToken);\r\n            }).catch((err)=>{\r\n               if(err.response.data.error.message==\"EMAIL_EXISTS\"){\r\n                    setErrors({...errors,custom_error:\"Already this email has been registered!\"})\r\n               }else if(String(err.response.data.error.message).includes('WEAK_PASSWORD')){\r\n                    setErrors({...errors,custom_error:\"Password should be at least 6 characters!\"})\r\n               }\r\n\r\n            }).finally(()=>{\r\n                setLoading(false)\r\n            })\r\n        }\r\n        console.log(initialStateErrors,errors);\r\n        setErrors(errors);\r\n    }\r\n\r\n    const [inputs,setInputs] = useState({\r\n        email:\"\",\r\n        password:\"\",\r\n        name:\"\"\r\n    })\r\n\r\n    const handleInput = (event)=>{\r\n        setInputs({...inputs,[event.target.name]:event.target.value})\r\n    }\r\n\r\n    if (isAuthenticated()) {\r\n        return <Navigate to=\"/home\" />\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Nav/>\r\n            <section className=\"register-block fullbgfire\">\r\n                <div className=\"container\" id=\"bgregfire\">\r\n                <div className=\"row \">\r\n                    <div className=\"col register-sec\">\r\n                        <h2 className=\"text-center\">Register Now</h2>\r\n                        <form onSubmit={handleSubmit} className=\"register-form\" action=\"\" >\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"exampleInputEmail1\" className=\"text-uppercase fw-bold\">Name</label>\r\n            \r\n                            <input type=\"text\" className=\"form-control\" onChange={handleInput} name=\"name\" id=\"\"  />\r\n                        { errors.name.required?\r\n                            (<span className=\"text-danger\" >\r\n                                    Name is required.\r\n                                </span>):null\r\n                            }\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"exampleInputEmail1\"  className=\"text-uppercase fw-bold\">Email</label>\r\n            \r\n                            <input type=\"text\"  className=\"form-control\" onChange={handleInput} name=\"email\" id=\"\"  />\r\n                            { errors.email.required?\r\n                            (<span className=\"text-danger\" >\r\n                                Email is required.\r\n                            </span>):null\r\n                            }\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"exampleInputPassword1\" className=\"text-uppercase fw-bold\">Password</label>\r\n                            <input  className=\"form-control\" type=\"password\" onChange={handleInput}  name=\"password\" id=\"\" />\r\n                            { errors.password.required?\r\n                            (<span className=\"text-danger\" >\r\n                                Password is required.\r\n                            </span>):null\r\n                            }\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n            \r\n                            <span className=\"text-danger\" >\r\n                            { errors.custom_error?\r\n                            (<p>{errors.custom_error}</p>)\r\n                            :null\r\n                            }\r\n                            </span>\r\n                            {loading ?\r\n                            (<div  className=\"text-center\">\r\n                                <div className=\"spinner-border text-primary \" role=\"status\">\r\n                                    <span className=\"sr-only\">Loading...</span>\r\n                                </div>\r\n                            </div>):null\r\n                            }\r\n            \r\n                            <input type=\"submit\" className=\"btn btn-login float-right\" id=\"btnfire\" disabled={loading}  value=\"Register\" />\r\n                        </div>\r\n                        <div className=\"clearfix\"></div>\r\n                        <div className=\"form-group\">\r\n                        Already have account ? Please <Link className='linklogfire text-ligth' to=\"/login\">Login</Link>\r\n                        </div>\r\n            \r\n            \r\n                        </form>\r\n            \r\n            \r\n                    </div>\r\n            \r\n                </div>\r\n            \r\n            \r\n                </div>\r\n            </section>    \r\n        </div>\r\n        )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}